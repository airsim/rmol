#
Name:           @PACKAGE@
Version:        @VERSION@
Release:        @RPM_RELEASE@%{?dist}

Summary:        @PACKAGE_NAME@ is a C++ library of Revenue Management and Optimisation classes and functions.

Group:          System Environment/Libraries 
License:        LGPLv2
URL:            http://%{name}.sourceforge.net
Source0:        http://download.sourceforge.net/%{name}/%{name}-%{version}.tar.gz
BuildRoot:      %{_tmppath}/%{name}-%{version}-%{release}-root-%(%{__id_u} -n)

BuildRequires:  automake, autoconf, libtool, gettext
BuildRequires:  gsl-devel >= 1.8
BuildRequires:  boost-devel >= 1.34
BuildRequires:  cppunit-devel >= 1.10
#Requires:       

%description
@PACKAGE_NAME@ is a C++ library of Revenue Management and Optimisation classes 
and functions. Typically, that library may be used by service providers
(e.g., airlines offering flight seats, hotels offering rooms, rental car
companies offering rental days, broadcasting company offering advertisement 
slots, theaters offering seats, etc.) to help in optimising their revenues from
seat capacities.
Most of the algorithms implemented are public and documented in the following
book:
The Theory and practice of Revenue Management, by Kalyan T. Talluri and
Garrett J. van Ryzin, Kluwer Academic Publishers, 2004, ISBN 1-4020-7701-7

Install the @PACKAGE@ package if you need a library for high-level
revenue management functionality.

%package        devel
Summary:        Headers and libraries for building apps that use @PACKAGE_NAME@
Group:          Development/Libraries
Requires:       %{name} = %{version}-%{release}

%description    devel
This package contains headers and libraries required to build applications that
use @PACKAGE_NAME@.

%package html-doc
Summary:        HTML documentation for the @PACKAGE_NAME@ library
Group:          System Environment/Libraries

%description html-doc
This package contains the documentation in the HTML format of the @PACKAGE_NAME@
library. The documentation is the same as at the @PACKAGE_NAME@ web page.


%prep
%setup -q


%build
%configure --enable-static --with-docdir=%{_docdir}/%{name}-%{version}
make %{?_smp_mflags}


%install
rm -rf $RPM_BUILD_ROOT
make install DESTDIR=$RPM_BUILD_ROOT
%find_lang %{name}
# remove unpackaged files from the buildroot
rm -f $RPM_BUILD_ROOT%{_infodir}/dir

%clean
rm -rf $RPM_BUILD_ROOT

%post -p /sbin/ldconfig

%postun -p /sbin/ldconfig

%post devel
/sbin/install-info %{_infodir}/%{name}-ref.info.gz %{_infodir}/dir

%preun devel 
if [ "$1" = 0 ]; then
   /sbin/install-info --delete %{_infodir}/%{name}-ref.info.gz %{_infodir}/dir
fi

%files -f %{name}.lang
%defattr(-,root,root,-)
%doc AUTHORS ChangeLog COPYING INSTALL NEWS README
%{_bindir}/%{name}
%{_libdir}/lib*.so.*
#%{_docdir}/%{name}-%{version}/html
#%{_datadir}/info/dir
%{_datadir}/man/man3/%{name}.3.gz

%files devel
%defattr(-,root,root,-)
%doc
%{_includedir}/%{name}
%{_bindir}/%{name}-config
%{_libdir}/lib*.a
%{_libdir}/lib*.la
%{_libdir}/lib*.so
%{_libdir}/pkgconfig/%{name}.pc
%{_datadir}/aclocal/%{name}.m4
%{_datadir}/info/%{name}-ref.info.gz
%{_datadir}/man/man1/%{name}-config.1.gz

%files html-doc
%defattr(-,root,root,-)
%doc %{_docdir}/%{name}-%{version}

%changelog
* Sun Mar  8 2009 Denis Arnaud <denis.arnaud_fedora@m4x.org> @RPM_RELEASE@
- RPM release for Fedora 10
* Wed Mar  4 2009 Denis Arnaud <denis.arnaud_fedora@m4x.org> @RPM_RELEASE@
- Second RPM release
